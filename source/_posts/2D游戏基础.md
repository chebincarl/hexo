---
layout: title
title: 2D游戏基础
date: 2019-03-24 23:50:06
categories: Unity
tags: Unity5.X游戏开发指南
---
思考并回答以下问题：
1.Generate Mip Maps是什么意思？

<!--more-->

本章涵盖：
1.正交摄像机
2.精灵

一般来说，3D游戏以透视摄像机作为观察者，以3D模型作为被观察物；2D游戏以正交摄像机作为观察者，以面片模型作为被观察物，而这种2D游戏专用的面片模型是精灵。

# 正交摄像机

新建工程后，设置默认摄像机Projection参数为Orthographic，如下图所示，摄像机所能看到的是一个立方体。立方体的大小由图1中的Size大小决定。

# 精灵

在2D游戏中，被观察物是精灵。屏幕上显示的2D图片都叫作精灵，例如游戏里的角色（如主角和敌人）、场景装饰（如花草）等散布在场景中的道具都是精灵。

## 精灵实现

精灵实现分为3步：编辑器设置、图片导入和精灵显示。

** 编辑器设置 **

首先在编辑器设置中将开发模式设置为2D，点击导航菜单栏->Edit->Projet Settings->Editor，打开Editor编辑器设置。如下图所示，将Default Behavior Mode下的Mode参数设置为2D，设置后向Unity工程导入图片资源，将默认为Sprite类型。

** 图片导入 **

任意拖入一张图片到Project窗口中完成导入。选中导入的图片查看Inspector视图下的设置信息。Texture Type（贴图类型）已经是Sprite（2D and UI）。

** 精灵显示 **

将图片拖入Hicrarchy视图内，即完成了精灵的显示，可以看到生动的精灵已经在我们的Scene窗体内了。

## 调整精灵尺寸

点击Scene窗内顶部菜单栏2D按钮，可以看到Scene场景的视角已经锁定为正交模式（如下图所示）。

在下图中，有4个圆点围绕在精灵的4个顶角上。拖动任意一个圆点，精灵都会随着鼠标的移动变大或缩小。同时观察Inspector窗口中Transform组件的Position和Scale，它们也跟随着变化，可以很方便地调节精灵的大小。当点击键盘的Shift键拖动时，精灵呈现长宽比规则缩放，再点击Alt键，就会中心等比例缩放。当鼠标靠近圆点鼠标时，会出现旋转提示，这时就可以旋转精灵了。使用Shift键旋转会出现固定的角度旋转。

在实现了精灵的显示后，下面来详细说明精灵实现过程中的各个功能参数。

## 精灵渲染器

精灵渲染器（Sprite Renderer）是添加在游戏对象上用以渲染精灵的组件，将图片渲染在场景世界里。当我们将图片拖入到Hierarchy视图，其实就是Unity为我们创建了一个游戏对象，并添加了Sprite Renderer组件，指定Sprite参数为拖曳的图片。

如果游戏中需要显示隐藏精灵，可以设置Sprite Renderer的enable参数为true或者false，下表是Sprite Renderer的参数说明。

| 参数  | 说明  |
| :------------ | :------------ |
| Sprite  | 选择其他的精灵  |
| Color  | 设置精灵颜色  |
| Material  | 精灵的默认材质  |
| Sorting Layer  | 所属层  |
| Order in Layer  | 渲染顺序  |

在Scene视图中，点击左上角的Shaded按钮，选择Wireframe线框模式。观察图19-5中的精灵可以看到精灵实际上就是一个面片，如下图所示。

## 图片导入设置

下面就来看看图片导入时的各个参数，在Project视图中选中之前的图片，Inspector视图中的导入设置如下图所示。

* Sprite Mode：有两种模式：Single和Multiple，分别用来处理一张图承载单个美术元素和多个美术元素的资源。

* Packing Tag：标示Sprite Packer的标示字符。

* Pixels Per Unit：指多少像素对应一个Unity单位。2D游戏所使用的图片以像素为单位，Unity的单位是Unit，这个参数就是设定图片像素和Unity单位的对应关系。例如在美术设计时，规定人物的高度是32像素，其他图片资源按照这个比例设计。资源导入Unity后设置Pixels Per Unit为32（默认是100），那么这个人物的高度等于一个Unity单位。创建一个立方体，它的长宽高默认为1，将其与人物对比，高度一致，如下图所示。像素比例大小以及摄像机的Size设置是2D游戏开发初期非常重要的规划。

* Sprite Editor：精灵编辑器按钮。

* Generate Mip Maps：是根据图片远离透视摄像机的程序呈现不同的渲染效果，勾选后图片会创建多个层次大小的图片，如图1所示。2D游戏开发不会出现这种远近差别。如果不是特殊情况，建议不要勾选。读者可以通过开关此参数在下方的预览图中对比图片。另外，需要注意的是，图片需要POT（Power Of Two）2的幂次方大小，才能支持这个技术。

* Filter Mode：过滤模式和Texture2D一样，点模糊、线性模糊和三线性模糊。

## 精灵编辑

在图片导入的过程中，有时候还需要对图片承载的精灵进行处理，例如一张图片中包含多个精灵，或者将多个道具放在一张图片里，或者主角挥刀的动作，按照动作的时间点被拆解成多张图片。这种播放动画的方式叫帧动画，每个时间点为一帧，通常一组帧动画会全部放入一张图片中，如19-10所示。这时我们就需要在精灵编辑器中设置，并将图片切割成一个个精灵。

选中导入图片，在Inspector视图中点击Sprite Editor按钮，打开精灵编辑界面。点击左上方的Slice按钮，弹出裁剪方式面板，如图19-11所示。

设置Type参数为Grid，Pixel Size参数X和Y均为32，Pivot（锚点）参数为Center，点击Slice按钮进行切割，点击右上角Apply按钮生成精灵组。图片下切割好的精灵在Project视图中，如图所示。

任意选择其中一个拖入Hierarchy面板中，就可以创建精灵对象了。选中所有精灵，拖入Hierarchy窗体中生成精灵动画。选中生成动画文件，点击菜单栏->Window->Animation，打开动画编辑工具，如图19.13所示。


点击播放按钮（黑色三角形）就可以播放精灵动画了。

## 精灵图集

我们也可以将多个精灵打入一张图集里，这样做可以提高渲染效率（参照关于DrawCall合并的内容）。