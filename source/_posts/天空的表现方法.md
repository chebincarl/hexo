---
layout: title
title: 天空的表现方法
date: 2019-03-19 21:41:04
tags: Unity
---
天空的代表性表现方式有天空盒（Skybox）和天空穹（Skydome）。首先，天空盒将摄像机可以看到的天空分为6个面（front、back、left、right、up、down）的图像，并将其表现为立方体形式。而天空穹则在穹顶形态的网格上附上天空图像纹理呈现天空，如图3-38所示。

<!--more-->

# 六面天空盒
首先学习如何使用默认六面天空盒（6 sided skybox）表现天空。新建材质并重命名为Skybox，将其着色器设置为Skybox->6Sided即可指定天空盒的6个纹理
。

大部分用于天空盒的图像文件名均为Front、Back、Left、Right、Up、Down，有时可能没有Down文件。

Exposure属性负责设置天空盒纹理曝光度，通过其可以调整天空亮度。Rotation属性可以Y轴为基准顺时针旋转天空。

选择菜单Window-Lighting，打开光照视图，在环境光照（Environment Lighting）功能的Skybox选项中设置天空盒材质。

# 程序天空盒
Unity 5中，天空盒的构建方式增加到3种，除了上文介绍的六边形和立方体贴图，还有新增的程序天空盒（Procedural Skybox），程序天空盒的特点在于，可以自行设置天空颜色、大气浓度、亮度、太阳位置以及大小等。第一次打开Unity 5时，使用的默认天空盒就是程序天空盒，我们无法修改该默认值的各种属性值，所以需要另外制作。新建材质，重命名为SkyboxPC，并将其Shader选项修改为Skybox->Procedural.

| 属性  | 功能  |
| :------------ | :------------ |
| Sun size  | 调整太阳大小  |
| Atmoshpere Thickness  | 大气浓度-调整大气清晰或浑浊的程度  |
| Sky Tint  | 调整天空颜色  |
| Ground  | 调整大地颜色  |
| Exposure  | 调整天空亮度  |

通过Sun size选项可以调整太阳图像的大小，也可以调整位置。选择菜单Window->Lighting开光照视图，将平行光设置到Sun属性，如图3-43所示。

现在，旋转场景视图中的平行光后，可以将太阳移动到想要的位置。

# 立方图天空盒
立方图天空盒（CubeMap Skybox）方式是先建立立方图，然后用其表现天空。立方图天空盒与六面天空盒一样，需要6个纹理图像，主要用于实现物体反射远处天空环境的效果。为了使用立方图天空盒，Unity要求6个面的图像在一张纹理中，并且纹理类型（Texture Type）需要设置为立方图。

但是，将6个面的纹理合并为一个纹理图像时，需要以表3-5所示的3种方式进行。

| 合并类型  | 图像形态  |
| :------------ | :------------ |
| 6 Frame Layout ( Cube Environment)  | 6个面的图像在同一平面布高  |
| Latitude-Longitued ( Cylindrical )  | 组合为圆柱形态的全景图像  |
| Mirrored Ball ( Spheremap  | 组合为球面( Sphere )图像  |

六面天空盒的渲染调用(DrawCall)消耗量

六面天空盒因使用6个纹理，故需要6次渲染调用，但立方图天空盒和程序天空盒只需要消耗一次渲染调用，所以使用后者可以降低渲染调用次数。另外，天空穹只使用一张纹理图像，所以也只消耗一次渲染调用，可以大大降低渲染调用次数。但是，不同游戏存在不同需求，需要限定最大可视范围时，使用天空穹就可能不太合适了。
