---
layout: title
title: 渲染和贴图
date: 2019-05-20 11:39:06
categories: Unity
tags: 大话Unity2018
---
思考并回答以下问题：
1.Unity中图形模块的两个重要模块是哪两个？
2.决定物体外观的因素有什么？这些因素之间有什么关系？
3.材质的可配置参数取决于什么？
4.着色器是什么？根据哪两种信息来渲染什么？
5.贴图是什么？有哪些用途？2D图形和UGUI对图形有什么要求？粒子系统需要使用贴图吗？
6.Albedo是什么意思？还有什么其他类型的贴图？
7.一定要动手查看一下贴图、材质和着色器在Unity中的关联。

<!--more-->

本章涵盖：
* 1.3D模型的贴图
* 2.2D图形
* 3.GUI 
* 4.粒子

{% asset_img 0.png %}

渲染和光照是Unity中图形模块的两个重要模块。

在Unity中渲染一个物体，最重要的三个概念是材质（Material），贴图（Texture），着色器（Shader）。

* <span style="color:red;">材质</span>通过使用贴图，Tiling参数，颜色参数等来定义物体表面应该如何呈现。材质的可配置参数取决于材质使用的着色器。

* <span style="color:red;">着色器</span>是一段代码，基于场景的<span style="color:red;">光照</span>信息和<span style="color:red;">材质的配置</span>，计算物体最终渲染的顶点位置和颜色。着色器决定了材质上面的可配置参数。

* <span style="color:red;">贴图</span>是位图图像。材质可以对贴图进行引用，然后着色器在计算GameObject的表面颜色时可以使用贴图中的信息。除了GameObject表面的基本颜色（Albedo）外，贴图还可以丰富材质表面的许多其他方面，例如自发光、表面凹凸等。

这三者之间的关系是：

* 一个材质只能使用一种着色器，一种着色器可以被多个材质使用。

* 一个材质可能需要多张不同的贴图（基本的漫反射贴图、法线贴图、高光贴图等），一张贴图可以被多个不同的材质复用。

* 材质可以和网格Mesh关联起来，网格的表面最终会显示成对应材质的样子。

<span style="color:red;">对于大多数的写实渲染需求（角色、场景、环境等），使用内置的Standard着色器通常是最好的选择。</span>

对于特殊的渲染需求，Unity也内置了多种不同风格渲染的Shader。

如果这些都不能满足你的需要，当然还可以自己制作ShaderGraph或者写Shader代码来实现。

之前我们已经学习了图片（贴图）导入{% post_link 图片导入 图片导入 %}的设置，今天我们来学习一下贴图在Unity中的作用都有什么。

# <span style="color:#039BE5;">Texture（贴图）</span>

通常情况下，物体的Mesh网格只给出了物体的大概形状，大部分细节都由贴图提供。<span style="color:red;">贴图是绘制在物体网格表面的图像。</span>你可以把贴图想象成有弹性的壁纸，这个壁纸可以通过拉伸、压缩贴到网格的表面。通常贴图的定位（UV信息）是通过3D建模软件完成的。

{% asset_img 1.png %}<center>一个圆柱体，贴上树皮的贴图，看起来就像是一段树干</center>

## <span style="color:#00ACC1;">3D模型的贴图</span>

一张贴图要想贴到模型上，必须先将贴图赋予一个材质，然后将材质与模型关联。

贴图有不同类型和用途，例如：

Albedo（反照率）贴图：一个材质最基础的贴图，能表示材质表面反射的颜色及比率。

> 这里用到了光学中的概念，人眼能看到一个物体是黄色，是因为黄色的光反射到了人的眼睛里。反照率贴图就是一张这样的贴图，可以理解为是物体原本自身的颜色贴图。

{% asset_img 2.png %}<center>一般的漫反射贴图都是实际颜色</center>

法线贴图：一种特殊的贴图，通过贴图的方式来实现模型表面的凸凹，增加模型的细节

{% asset_img 3.png %}<center>一般的法线贴图大概都是这个样子的</center>

一个材质可以使用多张贴图，比如同时使用漫反射贴图和法线贴图，就能让模型有基本颜色的基础上，细节更加丰富。

贴图的尺寸应该尽可能使用2的n次幂的大小，比如256x256，512x1024等尺寸。

## <span style="color:#00ACC1;">2D图形</span>

<span style="color:red;">2D游戏中，贴图需要设置为Sprite</span>。在场景中绘制时类似一个纸片的形式，没有厚度。

{% asset_img 4.png %}<center>在3D视角下查看2D的Sprite</center>

一般情况2D游戏的角色需要一系列的图片来实现角色的不同状态或者动画。

## <span style="color:#00ACC1;">GUI</span>

<span style="color:red;">使用Unity内置的GUI系统时，用到的图片需要设置为Sprite。</span>

游戏的图形用户界面（GUI）可以让玩家查看信息、进行交互。例如，显示游戏当前得分、游戏菜单是游戏中常见的GUI。虽然界面的图片与模型表面的贴图有很大不同，但是都是使用的图片资源。

## <span style="color:#00ACC1;">粒子</span>

网格非常适合表示实体物体，但对于魔法遗留的火焰，烟雾和火花等效果并不适合。粒子系统可以更好地处理这种特效。粒子一般用来表示很小的东西，比如液体或气体。当大量粒子一起运动时，可以产生非常逼真的效果。例如，可以将<span style="color:red;">火焰贴图</span>的粒子从中心点以极快的速度发射出去来模拟爆炸；可以用大量高速向下运动的水珠来模拟瀑布。


# <span style="color:#039BE5;">总结</span>

本文讲解了渲染的三大核心概念：材质，贴图和着色器。

* <span style="color:red;">材质是贴图和着色器的载体。</span>

* <span style="color:red;">着色器决定了如何使用材质的参数来计算最终的显示结果。</span>

* 贴图是一个材质的灵魂，贴图的质量很大程度决定了场景、角色的效果。