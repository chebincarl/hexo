---
layout: title
title: 光照与着色器
date: 2019-04-21 17:45:16
categories: Unity
tags: Unity移动游戏开发
---
思考并回答以下问题：
1.材质有哪两部分构成？
2.什么是着色器？
3.Unity中有几种着色器？各自有什么特点？

<!--more-->

本章将介绍光照与材质，它们是除纹理之外决定游戏外观效果的首要因素。具体来说，我们将深入介绍Standard着色器，它简化了创建美观材质的过程。另外还将介绍如何编写自己的着色器，从而在很大程度上自己控制对象在游戏中的显示效果。最后讨论如何使用全局光照和光照贴图，通过在场景中对光线传播进行真实建模，创建看起来很棒的环境。

# 材质与着色器

在Unity中，对象的外观由其附加的材质所定义。材质由两个元素构成：**着色器**，以及着色器使用的数据。

着色器是在显卡上运行的一个非常小的程序。你在屏幕上看到的每个东西，都是着色器为每个像素计算出正确的颜色值后的显示结果。

Unity中主要有两种不同类型的着色器，即**表面着色器**和**顶点-片段着色器**。

表面着色器负责计算对象表面的颜色。表面的颜色由多个组件定义，包括其反射率、平滑性等。表面着色器的工作是为对象的每个像素计算这些属性的值，然后表面信息被返回到Unity，Unity把表面信息与场景中每个灯光的信息结合起来，决定像素的最终光照颜色。

顶点-片段着色器则简单得多。这种着色器负责计算像素的最终颜色，那么需要你自己计算。顶点-片段着色器提供了低级控制，意味着它们能够实现出色的效果。因为这种着色器一般更加简单，所以相比于表面着色器，速度通常也更快。

实际上，Unity会把表面着色器编译为顶点-片段着色器。它替你完成了困难的工作，实现必要的光照计算来得到真实的光照效果。表面着色器能实现的任何效果，在顶点-片段着色器中也能实现，只不过需要更多的工作。

除非有特殊的用例需要，否则表面着色器一般是最好的选择。

Unity还提供了第三种类型的着色器，称为**固定功能着色器**。固定功能着色器将预定义操作组合到一起，而不是让你编写自定义着色器。在自定义着色器得到广泛应用之前，固定功能着色器是主要采用的着色器；它们比自定义着色器更加简单，但是效果则不如自定义着色器。

我们首先创建一个自定义表面着色器，它与标准着色器很相似，但是添加了显示边缘高光（即高光显示对象边缘）的能力。下图显示了这种效果的一个例子。

> 使用自定义着色器的边缘高光

创建该效果需要执行下面的步骤。
（1）创建一个新项目。按照自己的想法任意命名此项目，然后选择3D模式。
（2）选择Create->Shader->Surface Shader，创建一个新着色器。将新着色器命名为SimpleSurfaceShader。
（3）双击该着色器。
（4）替换为下面的代码：
```cs

```