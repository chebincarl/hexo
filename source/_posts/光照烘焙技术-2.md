---
layout: title
title: 光照烘焙技术-2
date: 2019-04-04 15:46:54
tags:
---

Light Probes

<!--more-->

# Light Probes概述

尽管使用光照贴图可以大大提升场景的真实程度，但是它有一个缺点，那就是场景中非静态物体缺少真实的渲染，看上去就好像和场景格格不入。实时为移动物体计算光照贴图是不可能的，但是通过使用灯光探测器我们可以模拟类似的效果。

大概原理是这样的：在场景中的标记为探测器的静态点的位置采样光照，然后对相邻几个光照探测器位置所采样的灯光照明进行差值，在游戏进行的过程中计算差值的速度很快，玩家察觉不到，这样就可以帮助我们避免移动物体的光照和烘培场景格格不入的感觉。

Light Probes的优点：
* 1.性能佳，对比实时阴影性能高很多，适合移动平台。
* 2.配合烘焙，配合烘熔效果很好。
* 3.可视化，可以可视化编辑Light Probes的分布，不需要代码。

Light Probes的缺点：
* 1.烘焙后才能有效果，不能实时改变。
* 2.只能整体进行明暗变化。

Light Probes的使用：

如场景里面有一个烘焙好的简单场景，有一个第三人称控制器，第三人称控制器是作为动态物体的存在。
由于动态物体不受烘焙的影响，所以第三人称控制器和场景格格不入，如下图所示。

添加灯光探测器，打开菜单栏中的GameObject->Lighting->Light Probe Group选项，如下图所示。

在Light Probe Group选项里面，有添加、选择、删除和复制探头的按钮，如下图所示。

单击“Add Probe”按钮添加探头，放一些探头在场景里面，也可以建一个，然后复制多几个。探测器在场景中用黄色的球体表示，并且可以像其他游戏物体那样编辑移动它的位置，被选择的探测器可以通过健盘快捷键进行复制。最简单的方法为，先在各个角落放一个，把一定范围内的场景包起来。只要选择了Light Probe物体，那么这些探头点就可见，直接用鼠标点选这些探头，可以使用位移工具来移动它们，如下图所示。

在烘焙之前，还需要把场景中的静态物体再烘焙一遍，烘焙之前把Baking模式改变为Baked，然后单击Lighting而面板上的“Build”按钮来烘焙场景。烘焙完成以后，Light Probes Group探头点变为白色，烘焙完成，如下图所示。

单击开始游戏按钮，按W、A、S、D键移动第三人称控制器，我们可以发现人物的颜色已经受到环境的影响而发生变化了，这就是说明第三人称控制器受到了Light Probe影响了，如下图所示。